<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>

<HEAD>

    <META HTTP-EQUIV="Content-Type"
        CONTENT="text/html; charset=utf-8">


    <TITLE>
        Cygbuild - A porting tool for making Cygwin Net Releases
    </TITLE>


    <!--   ................................................................
            META TAGS (FOR SEARCH ENGINES)
            ................................................................
    -->
  <META HTTP-EQUIV="keywords"
        CONTENT="Cygwin, gcc, make">

  <META HTTP-EQUIV="description"
        CONTENT="Utilities for Win32 Cygwin source and binary package maintainers. To configure, build, strip, produce diffs and generate cygwin specific template files. To put it simply: Convert Unix/Linux/Perl package into complete Cygwin Net Release distribution"


  <META NAME="Version"
        CONTENT="$Id: index.html,v 1.5 2008/12/02 08:54:58 jaalto Exp $">


    <STYLE TYPE="text/css">

        a
        {
            text-decoration: none;
        }


        address
        {
            font-size: 0.8em;
        }

        samp.file
        {
            color: #4C9CD4;
            font-weight: bold;
        }

        samp.code
        {
            color: navy;
        }

        i.show
        {
            color: #228b00;
        }

        i.show2
        {
            color: blue;
        }


        em.show
        {
            color: #228b00;
        }


        pre.code
        {
            color: navy;
        }


        span.link
        {
            color: teal;
            font-size:  0.7em;
            font-family: verdana, sans-serif;
        }

        span.cmd
        {
            color: #5595C0;
            font-size: 0.8em;
            font-weight: bolder;
        }

        span.cmd-opt
        {
            font-size: 0.8em;
            color: #5595C0;
        }

        span.cmd-rest
        {
            color: #399C6A;
            font-size: 0.8em;
            font-weight: bolder;
        }

        a:hover
        {
            text-decoration: none;
            color:           purple;
            background:      #afb;
        }

        a.main:hover
        {
            text-decoration: none;
            color:           purple;
            background:      #afb;
        }

    </STYLE>

    <SCRIPT TYPE="javascript"
            SRC="http://js-tools.sourceforge.net/lib/libtime-bmt.js">
    </SCRIPT>

    <SCRIPT TYPE="javascript">
        var bmt = new LibTimeBMT();
        bmt.activate(7000);
    </SCRIPT>

</HEAD>



<BODY>

<!--  .......................................................................

      PROJECT TITLE

      .......................................................................
-->

<HR NOSHADE SIZE=1>

        <TABLE BORDER       = "0"
               bgcolor      = "#EEEEF8"
               WIDTH        = "100%"
               CELLPADDING  = "2"
               CELLSPACING  = "0"
               >

            <TR>
            <TD ALIGN=center>


            </TD>
            <TD ALIGN="center">

                    <FONT SIZE="+10">
                        Cygbuild - A Porting tool for making Cygwin Net Releases
                    </FONT>
            </TD>
            </TR>
        </TABLE>

<HR NOSHADE SIZE=1>

<!--  .......................................................................

      START OF BODY TEXT

      .......................................................................
-->

<H1> Links and download </H1>

<UL>

    <LI>
        <A HREF="http://freshmeat.net/projects/cygbuild"
        CLASS="main">
	Main project page
        </A>
	(never changes; bookmark this one)
<!--

    <LI>
        <A HREF="https://savannah.nongnu.org/files/?group=cygbuild"
        class="main">
	Downloads
        </A>
-->

    <LI>
        <A HREF="manual/index.html"
        CLASS="main">
	Manual
        </A>

    <LI>
        <A HREF="devel/">
	Developer information
        </A>

    <LI>
        <A HREF="http://git.savannah.gnu.org/gitweb/?p=cygbuild.git;a=blob;f=ChangeLog;hb=devel"
        CLASS="main">
        ChangeLog
        </A>
        Generated by editing the code in Emacs and pressing
        key binding (C-x 4 a).
        <SPAN
        class="link">
        http://git.savannah.gnu.org/gitweb/?p=cygbuild.git;a=blob;f=ChangeLog;hb=devel
        </SPAN>

    <LI>Official Cygwin
        <A HREF="http://sources.redhat.com/cygwin-apps/setup.html">
        setup format </A> and
        <A HREF="http://cygwin.com/setup.html">
        Package Contributor's Guide
        </A>

</UL>


<!--  .......................................................................
      HEADING
      .......................................................................
-->


<H1>
What is Cygbuild?
</H1>

        <I class="show">Cygbuild</I> is something like Debian
        <TT>dh_make(1)</TT> .deb or <TT>rpm(1)</TT> .rpm maker utility, but
        for Win32 Cygwin platform. This is just an analogy and you can read
        more details from the disclaimer below.

        <P> If you are familiar with .deb or .rpm making or
        Activestate Perl .ppm and .ppd files,
        the <A HREF="http://www.cygwin.com">Cygwin</A> Net Release
        packaging is just another variant of these existing packaging
        methods. The process is quite straight forward: one must
        mirror whole system directory structure where the files would
        go, place the files in the correct directories and finally
        wrap all aup into a single package <SAMP class="file">
        package-NN.NN-RELEASE.tar.bz2</SAMP>. The end user installs
        this premade Cygwin Net install tar package at system root
        <SAMP class="file">/</SAMP>. In a nutshell this is roughly the
        methodology of making Cygwin Net Releases. For more information,
        refer to Cygwin <A
        HREF="http://cygwin.com/setup.html">Package Contributor's Guide</A>


        <P>
        Normally the porting process starts by downloading some Unix or
        Linux package that would be nice to have under Cygwin as well. So
        the porter must:

<OL>

        <LI>  Unpack package (<SAMP class="cmd">tar -zxvf *tar.gz</SAMP>)
              </LI>

        <LI>  Configure it (<SAMP class="cmd">./configure</SAMP>)
              </LI>

        <LI> Build it (<SAMP class="cmd">make all</SAMP>). This is where
              the porting may stuck and some other Cygwin related work may
              need to be done before package can be contributed. Perhaps
              you need download more libraries befofore compile can finish.
              And this means that you need to port extra libraries first to
              Cygwin ...
              </LI>

        <LI>  If the Makefile does not use <SAMP
              class="code">install(1)</SAMP>, the porter must modify
              Makefile or make his own install method. The culprit is many
              times the <SAMP class="code">cp(1)</SAMP> command that is
              used in Makefiles to copy files to install location. The
              correct way is to use program <SAMP
              class="code">install(1)</SAMP> Here the porter's
              experience is needed.
              </LI>

</OL>


        <P> All of these steps can be automated in a certain degree at
        least for Unix/Linux packages that use standard packaging shemes.
        These packages are:

<OL>

        <LI> Standard GNU packages (<SAMP class="cmd">./configure ; make
             prefix=.... install</SAMP>)
             </LI>

        <LI> Debian <SAMP class="cmd">.orig.tar.gz</SAMP> packages
             </LI>

        <LI> Library packages (lib*.a etc). Cygbuild contains
             command 'package-devel' for these.
             </LI>

        <LI> Standard Perl packages that use <SAMP class="cmd">Makefile.PL</SAMP>
             </LI>

        <LI> Standard Python packages that use <SAMP class="cmd">setup.py</SAMP>
             </LI>

</OL>


        If the standard build commands cannot be used (<SAMP
        class="cmd">./configure; make all test install</SAMP>), it is
        possible to use custom shell script files, which the porter can
        tweak. The manual page will explain this in detail, so see link at
        the top of page for further details and read section <I
        class="show">Optional external scripts</I>.


<!--  .......................................................................
      HEADING
      .......................................................................
-->

<H1>
    What are the benefits of using Cygbuild?
</H1>

        There is a generic bourne shell example script (usually
        referred as g-b-s) in Cygwin's Package Contributor's Guide It
        can be used for maintaining a Cygwin Net Release. Cygbuild has
        been evolved from it and combines "Method One" and "Method
        Two" and adds "Method three++" (automation). The benefits of
        using Cygbuild are:

<UL>

        <LI> You do not have to modify or write separate installation
        script to every package you are porting.
        </LI>

        <LI>Cygbuild can can generate the build script over and over;
        every time you port a new version of some package.
        </LI>

        <LI> To start porting the package, the templates are
        automatically populated under directory <SAMP
        class="cmd">CYGWIN-PATCHES/</SAMP>. The only need is to fill
        in and activate the ones needed.
        </LI>

        <LI> If package does not provide manual page(s), it is simple
        matter of filling in the manual page template which is in
        readable Perl POD format. No need to master cryptic <SAMP
        class="code">nroff(1)</SAMP> formats. User contributed manual
        pages are automatically installed from directory <SAMP
        class="cmd">CYGWIN-PATCHES/</SAMP>.
        </LI>

        <LI> The detection of packaging type (Perl, Python, Library,
        Stripping of *.exe *.dll etc.) is all automatic.
        </LI>

        <LI> There is <I class="show">check</I> command that helps
        verifying the install and package integrity for e.g.: missing
        manual pages, incorrect <SAMP
        class="cmd">package.README</SAMP> file content, missing
        library dependencies in <SAMP class="cmd">setup.hint</SAMP>
        etc.
        </LI>

        <LI> It is possible to delegate custom or difficult configuration
        options to user written external scripts. This provides
        modularised way of handling difficult ports.
        </LI>

</UL>

<!--  .......................................................................
      HEADING
      .......................................................................
-->

<H1>
Disclaimer
</H1>

        The references to <TT>.deb</TT> and <TT>.rpm</TT> are actually a bit
        misleading, but they hopefully give some directions to what is
        sketched in this project. This project has evolved from the
        existing generic build script; some things needed improvements, the
        langauge was changed to bash, Perl was added, 5000+ more lines were
        coded; it just took off while doing porting work. The goal is
        practical: to make porting and maintenance of ports as easy as
        possible - with added automatisation and smart code base with high
        level languages like perl, python, ruby; please step in to propose
        your porting experience and your tools.

        <P> A person who is interested in porting software to Cygwin uses
        any tools he sees fit to make the port to happen. Most of the
        Cygwin application maintainers use some versions of the generic
        Bourne Shell script as a starting point. That suits to simple
        porting tasks, but usually requires keeping the script up to date
        for each new version. Many write additional tools and shell
        scripts which they use to maintain packages they contribute.

        <P> This project aims to help making the porting more automatic and
        maintaining it in the long term. Cygbuild's core is basicly the
        same as in the original Bourne Shell script, but with lot of
        enhancements and external modularity. It's written in Bash, which
        provides more programming rope than Bourne shell.

        <P> Whether a potential new Cygwin porter find Cygbuild's approach
        too complex at the porting task at hand, he might consider using
        the generic Bourne Shell script. But most likely the appetite grows
        and he may soon be porting projects A, B, C, D, E, F, and versions
        A-1, A-2, A-3, B-1, B-2, ... which mean more maintenance work for
        all of them when new versions appear. That may eventually become a
        big and time hogging task to manage if done manually for each
        package. Even if the ported wrote additional helper scripts, it is
        not guaranteed that other porter could adapt to them easily in case
        where porter ceases to maintain the port.

        <P> Cygbuild is single utility to handle all subsequent version
        updates easier and to keep them ported with minimum of efforts. The
        porting tasks are done in standard and predictable manner. The
        module structure allows using using external helper scripts (where
        needed) to provide reproducible results even if the maintainership
        of a port switches to a new person. Handing over a Cygbuild managed
        port to another person requires no additional learning of user's
        private scrips or his directory structure layouts, environment
        variable settings etc.

        <P> Cygbuild tries to help the port to happen in matter if minutes
        while keeping the maintenance cost at minimum. It is hoped that
        over the time, the added automatisation and experiences from
        different ports will help to produce a tool, which will take the
        unnecessary routine tasks off the porter's shoulders.

<!--  .......................................................................
      HEADING
      .......................................................................
-->


<H1>
Install from Version Control
</H1>

       To download and install sources from development tree
       with <a href="http://git-scm.org">git</a> (see link
       <a href="http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html">"the tutorial"</a>
       for quick guide). A directory <tt>cygbuild</tt> will
       appear after cloning.

<PRE>
        <SPAN class="cmd">git</SPAN> clone <SPAN class="cmd-rest">git://git.savannah.nongnu.org/cygbuild.git</SPAN>
        <SPAN class="cmd">cd</span> cygbuild
        <SPAN class="cmd">git</SPAN> checkout <SPAN class="cmd-opt">--track -b</SPAN> <SPAN class="cmd-rest">devel origin/devel</SPAN>
        <SPAN class="cmd">make</SPAN> <SPAN class="cmd-rest">install-symlink</SPAN>

	... to get new updates from time to time
        <SPAN class="cmd">git</SPAN> pull
</PRE>

<!--  .......................................................................
      HEADING
      .......................................................................
-->

<H1>
Contact
</H1>

    <P> There no mailing list for the project. Contact maintainer as
    needed by including "cygbuild" in the subject (otherwise message
    may be classified as spam by the fileters). Report problems to
    <a href="https://savannah.nongnu.org/projects/emacs-tiny-tools">bug
    tracker</a>. NOTE: You need to register an account at Savannah in
    order to post; the greyed out or 'striked through' items indicate that
    you haven't logged in.


<!--  .......................................................................
      HEADING
      .......................................................................
-->


<P>

<!-- FOOTER -->


<HR NOSHADE SIZE="1">

    <TABLE BORDER        = "0"
           WIDTH         = "100%"
           bgcolor       = "#C6C6C6"
           CELLPADDING   = "2"
           CELLSPACING   = "0"
           >
        <TR>

	    <!-- http://www.gnu.org/graphics/behroze/behroze-gnu-button2.png
	    -->

		     <!--
                     width  = "100"
                     height = "40"
		     -->

            <TD>
                <A REL="license" HREF="http://www.gnu.org/licenses">
                <IMG ALT    = "GNU GPL"
                     BORDER = "0"
                     SRC    = "pic/gnu.png">
                </A>
            </TD>

            <TD WIDTH="100%">
                All files in this project are licensed under
                <A REL="license"
                HREF="http://www.gnu.org/licenses/">
                GNU GPL</A>.
            </TD>

        </TR>
    </TABLE>

    <TABLE BORDER="0"
           bgcolor="#EEEEF8"
           WIDTH="100%"
           CELLPADDING="2"
           CELLSPACING="0"
           >
        <TR>
          <TD>

              <A HREF="http://www.sanannah.org">
              <IMG SRC      ="http://www.gnu.org/graphics/meditate-tiny.jpg"
                  width     ="60"
                  height    ="60"
                  border    ="0"
                  alt       ="Savannah Logo"
                  >
              </A>

          </TD>
          <TD WIDTH="100%">
              <FONT SIZE="-1">
                  <I>
                  This project, as well as many other opensource projects
                  is hosted by
                  <A HREF="http://www.savannah.org">Savannah</A>.
                  </I>
              </FONT>
          </TD>
        </TR>
    </TABLE>

    <TABLE BORDER="0"
           bgcolor="#EEEEF8"
           WIDTH="100%"
           CELLPADDING="2"
           CELLSPACING="0"
           >
        <TR>
          <TD>
              <A HREF="http://validator.w3.org/check?uri=referer">
              <IMG SRC      ="http://www.w3.org/Icons/valid-html401-blue"
                  width     ="81"
                  height    ="31"
                  border    ="0"
                  alt       ="Savannah Logo"
                  >
              </A>

          </TD>
          <TD WIDTH="100%">
              <FONT SIZE="-1">
                  <I>
                  <A HREF="http://www.w3c.org">
                  W3C
                  </A>
                  validated.
                  </I>
              </FONT>
          </TD>
        </TR>
    </TABLE>

</BODY>
</HTML>
